<div class="checkout__wrapper" [formGroup]="checkoutForm">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12">
                <div class="checkout__container">
                    <div class="checkout__content">
                        <h5>Địa chỉ giao hàng</h5>
                        <hr>
                        <div class="checkout__address" *ngFor="let address of addresses; let i = index">
                            <input name="address" (change)="onSelected($event)" type="radio" [value]="address.id">
                            {{address.firstName + ' ' + address.lastName}} | {{address.street}}, Phường {{address.ward}}, Quận {{address.district}}, {{address.city}}, {{address.country}} | {{address.phone}}
                            <button (click)="openDialog(address)" class="btn btn-success">Sửa địa chỉ</button> 
                            <button *ngIf="!address.isMainAddress"
                            [swal]="{
                              title: 'Xác nhân!',
                              text: 'Bạn có muốn xóa địa chỉ này?',
                              showCancelButton: true
                            }"
                            (confirm)="onDeleteAddress(address.id)" 
                             class="btn btn-danger">Xóa</button>
                        </div>
                        <button (click)="openDialogCreate()" class="btn btn-primary">Thêm địa chỉ</button> 
                        <form style="display: none;" formGroupName="addressForm">
                            <mat-form-field appearance="fill">
                              <mat-label>First Name</mat-label>
                              <input type="text" formControlName="firstName" matInput />
                            </mat-form-field>
                          
                            <mat-form-field appearance="fill">
                              <mat-label>Last Name</mat-label>
                              <input type="text" formControlName="lastName" matInput />
                            </mat-form-field>
                          
                            <mat-form-field appearance="fill">
                              <mat-label>Phone</mat-label>
                              <input type="text" formControlName="phone" matInput />
                            </mat-form-field>
                          
                            <mat-form-field appearance="fill">
                              <mat-label>Country</mat-label>
                              <input type="text" formControlName="country" matInput />
                            </mat-form-field>
                        
                            <mat-form-field appearance="fill">
                              <mat-label>Street</mat-label>
                              <input type="text" formControlName="street" matInput />
                            </mat-form-field>
                        
                            <mat-form-field appearance="fill">
                              <mat-label>City</mat-label>
                              <input type="text" formControlName="city" matInput />
                            </mat-form-field>
                        
                            <mat-form-field appearance="fill">
                              <mat-label>Ward</mat-label>
                              <input type="text" formControlName="ward" matInput />
                            </mat-form-field>
                        
                            <mat-form-field appearance="fill">
                              <mat-label>District</mat-label>
                              <input type="text" formControlName="district" matInput />
                            </mat-form-field>
                        </form>
                    </div>
                    <div class="checkout__content" formGroupName="deliveryForm">
                        <h5>Phương thức vận chuyển</h5>
                        <hr>
                        <div class="checkout__delivery" *ngFor="let delivery of deliveryMethods">
                            <input (click)="setShippingPrice(delivery)" formControlName="deliveryMethod" type="radio" name="deliveryMethod" [value]="delivery.id"> {{delivery.shortName}} - {{delivery.description}} - {{delivery.price | moneypipe}}
                        </div>
                    </div>
                    <div class="checkout__content" formGroupName="paymentMethodForm">
                        <h5>Phương thức thanh toán</h5>
                        <hr>
                        <div class="checkout__payment" *ngFor="let payment of paymentMethods">
                            <input type="radio"  name="paymentMethod" formControlName="paymentMethod" [value]="payment.id"> {{payment.description}}
                        </div>
                    </div>
                    <div class="checkout__content">
                        <h5>Thông tin khác</h5>
                        <hr>
                        <div class="checkout__payment">
                            <input type="checkbox" name="note"> Ghi chú
                            <div class="note__wrapper" formGroupName="noteForm">
                                <input type="text" name="orderNote" formControlName="orderNote" placeholder="Ghi chú của bạn">
                            </div>
                        </div>
                    </div>
                    <div class="checkout__content">
                          <button (click)="submitOrder()">Order</button>
                    </div>
                    <app-order-totals></app-order-totals>
                </div>
            </div>
        </div>
    </div>
 </div>
